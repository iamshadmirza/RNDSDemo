{"remainingRequest":"C:\\backup\\RNDSDemo\\node_modules\\thread-loader\\dist\\cjs.js??ref--14-1!C:\\backup\\RNDSDemo\\node_modules\\babel-loader\\lib\\index.js??ref--14-2!C:\\backup\\RNDSDemo\\node_modules\\react-native-ratings\\src\\SwipeRating.js","dependencies":[{"path":"C:\\backup\\RNDSDemo\\node_modules\\react-native-ratings\\src\\SwipeRating.js","mtime":1575294964885},{"path":"C:\\backup\\RNDSDemo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1575382926455},{"path":"C:\\backup\\RNDSDemo\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1575382927776},{"path":"C:\\backup\\RNDSDemo\\node_modules\\babel-loader\\lib\\index.js","mtime":1574752627091}],"contextDependencies":[],"result":["var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");var _interopRequireWildcard=require(\"@babel/runtime/helpers/interopRequireWildcard\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));var _regenerator=_interopRequireDefault(require(\"@babel/runtime/regenerator\"));var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _times=_interopRequireDefault(require(\"lodash/times\"));var _react=_interopRequireWildcard(require(\"react\"));var _propTypes=_interopRequireDefault(require(\"prop-types\"));var _reactNative=require(\"react-native\");var _jsxFileName=\"C:\\\\backup\\\\RNDSDemo\\\\node_modules\\\\react-native-ratings\\\\src\\\\SwipeRating.js\";var STAR_IMAGE=require('./images/star.png');var HEART_IMAGE=require('./images/heart.png');var ROCKET_IMAGE=require('./images/rocket.png');var BELL_IMAGE=require('./images/bell.png');var TYPES={star:{source:STAR_IMAGE,color:'#f1c40f',backgroundColor:'white'},heart:{source:HEART_IMAGE,color:'#e74c3c',backgroundColor:'white'},rocket:{source:ROCKET_IMAGE,color:'#2ecc71',backgroundColor:'white'},bell:{source:BELL_IMAGE,color:'#f39c12',backgroundColor:'white'}};var SwipeRating=function(_Component){(0,_inherits2.default)(SwipeRating,_Component);function SwipeRating(props){var _this;(0,_classCallCheck2.default)(this,SwipeRating);_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(SwipeRating).call(this,props));var _this$props=_this.props,onStartRating=_this$props.onStartRating,onFinishRating=_this$props.onFinishRating,fractions=_this$props.fractions;var position=new _reactNative.Animated.ValueXY();var panResponder=_reactNative.PanResponder.create({onStartShouldSetPanResponder:function onStartShouldSetPanResponder(){return true;},onPanResponderGrant:function onPanResponderGrant(){if(typeof onStartRating==='function'){onStartRating();}},onPanResponderMove:function onPanResponderMove(event,gesture){var newPosition=new _reactNative.Animated.ValueXY();newPosition.setValue({x:gesture.dx,y:0});_this.setState({position:newPosition,value:gesture.dx});},onPanResponderRelease:function onPanResponderRelease(event){var rating=_this.getCurrentRating(_this.state.value);if(rating>=_this.props.minValue){if(!fractions){_this.setCurrentRating(rating);}onFinishRating(rating);}}});_this.state={panResponder:panResponder,position:position,display:false};return _this;}(0,_createClass2.default)(SwipeRating,[{key:\"componentDidMount\",value:function componentDidMount(){var _STAR_IMAGE,_HEART_IMAGE,_ROCKET_IMAGE,_BELL_IMAGE;return _regenerator.default.async(function componentDidMount$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _regenerator.default.awrap(require('./images/star.png'));case 3:_STAR_IMAGE=_context.sent;_context.next=6;return _regenerator.default.awrap(require('./images/heart.png'));case 6:_HEART_IMAGE=_context.sent;_context.next=9;return _regenerator.default.awrap(require('./images/rocket.png'));case 9:_ROCKET_IMAGE=_context.sent;_context.next=12;return _regenerator.default.awrap(require('./images/bell.png'));case 12:_BELL_IMAGE=_context.sent;this.setState({display:true});_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 19:this.setCurrentRating(this.props.startingValue);case 20:case\"end\":return _context.stop();}}},null,this,[[0,16]]);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(this.props.startingValue!==prevProps.startingValue){this.setCurrentRating(this.props.startingValue);}}},{key:\"getPrimaryViewStyle\",value:function getPrimaryViewStyle(){var position=this.state.position;var _this$props2=this.props,imageSize=_this$props2.imageSize,ratingCount=_this$props2.ratingCount,type=_this$props2.type;var color=TYPES[type].color;var width=position.x.interpolate({inputRange:[-ratingCount*(imageSize/2),0,ratingCount*(imageSize/2)],outputRange:[0,ratingCount*imageSize/2,ratingCount*imageSize],extrapolate:'clamp'},{useNativeDriver:true});return{backgroundColor:color,width:width,height:width?imageSize:0};}},{key:\"getSecondaryViewStyle\",value:function getSecondaryViewStyle(){var position=this.state.position;var _this$props3=this.props,imageSize=_this$props3.imageSize,ratingCount=_this$props3.ratingCount,type=_this$props3.type;var backgroundColor=TYPES[type].backgroundColor;var width=position.x.interpolate({inputRange:[-ratingCount*(imageSize/2),0,ratingCount*(imageSize/2)],outputRange:[ratingCount*imageSize,ratingCount*imageSize/2,0],extrapolate:'clamp'},{useNativeDriver:true});return{backgroundColor:backgroundColor,width:width,height:width?imageSize:0};}},{key:\"renderRatings\",value:function renderRatings(){var _this$props4=this.props,imageSize=_this$props4.imageSize,ratingCount=_this$props4.ratingCount,type=_this$props4.type,tintColor=_this$props4.tintColor;var source=TYPES[type].source;return(0,_times.default)(ratingCount,function(index){return _react.default.createElement(_reactNative.View,{key:index,style:styles.starContainer,__source:{fileName:_jsxFileName,lineNumber:158}},_react.default.createElement(_reactNative.Image,{source:source,style:{width:imageSize,height:imageSize,tintColor:tintColor},__source:{fileName:_jsxFileName,lineNumber:159}}));});}},{key:\"getCurrentRating\",value:function getCurrentRating(value){var _this$props5=this.props,fractions=_this$props5.fractions,imageSize=_this$props5.imageSize,ratingCount=_this$props5.ratingCount;var startingValue=ratingCount/2;var currentRating=this.props.minValue?this.props.minValue:0;if(value>ratingCount*imageSize/2){currentRating=ratingCount;}else if(value<-ratingCount*imageSize/2){currentRating=this.props.minValue?this.props.minValue:0;}else if(value<=imageSize||value>imageSize){currentRating=startingValue+value/imageSize;currentRating=!fractions?Math.ceil(currentRating):+currentRating.toFixed(fractions);}else{currentRating=!fractions?Math.ceil(startingValue):+startingValue.toFixed(fractions);}return currentRating;}},{key:\"setCurrentRating\",value:function setCurrentRating(rating){var _this$props6=this.props,imageSize=_this$props6.imageSize,ratingCount=_this$props6.ratingCount;var initialRating=ratingCount/2;var value=null;if(rating>ratingCount){value=ratingCount*imageSize/2;}else if(rating<0){value=-ratingCount*imageSize/2;}else if(rating<ratingCount/2||rating>ratingCount/2){value=(rating-initialRating)*imageSize;}else{value=0;}var newPosition=new _reactNative.Animated.ValueXY();newPosition.setValue({x:value,y:0});this.setState({position:newPosition,value:value});}},{key:\"displayCurrentRating\",value:function displayCurrentRating(){var _this$props7=this.props,ratingCount=_this$props7.ratingCount,type=_this$props7.type,readonly=_this$props7.readonly,ratingTextColor=_this$props7.ratingTextColor;var color=ratingTextColor||TYPES[type].color;return _react.default.createElement(_reactNative.View,{style:styles.showRatingView,__source:{fileName:_jsxFileName,lineNumber:213}},_react.default.createElement(_reactNative.View,{style:styles.ratingView,__source:{fileName:_jsxFileName,lineNumber:214}},_react.default.createElement(_reactNative.Text,{style:[styles.ratingText,{color:color}],__source:{fileName:_jsxFileName,lineNumber:215}},\"Rating:\",' '),_react.default.createElement(_reactNative.Text,{style:[styles.currentRatingText,{color:color}],__source:{fileName:_jsxFileName,lineNumber:216}},this.getCurrentRating(this.state.value)),_react.default.createElement(_reactNative.Text,{style:[styles.maxRatingText,{color:color}],__source:{fileName:_jsxFileName,lineNumber:217}},\"/\",ratingCount)),_react.default.createElement(_reactNative.View,{__source:{fileName:_jsxFileName,lineNumber:219}},readonly&&_react.default.createElement(_reactNative.Text,{style:[styles.readonlyLabel,{color:color}],__source:{fileName:_jsxFileName,lineNumber:219}},\"(readonly)\")));}},{key:\"render\",value:function render(){var _this$props8=this.props,readonly=_this$props8.readonly,type=_this$props8.type,ratingImage=_this$props8.ratingImage,ratingColor=_this$props8.ratingColor,ratingBackgroundColor=_this$props8.ratingBackgroundColor,style=_this$props8.style,showRating=_this$props8.showRating;if(type==='custom'){var custom={source:ratingImage,color:ratingColor,backgroundColor:ratingBackgroundColor};TYPES.custom=custom;}return this.state.display?_react.default.createElement(_reactNative.View,{pointerEvents:readonly?'none':'auto',style:style,__source:{fileName:_jsxFileName,lineNumber:238}},showRating&&this.displayCurrentRating(),_react.default.createElement(_reactNative.View,(0,_extends2.default)({style:styles.starsWrapper},this.state.panResponder.panHandlers,{__source:{fileName:_jsxFileName,lineNumber:240}}),_react.default.createElement(_reactNative.View,{style:styles.starsInsideWrapper,__source:{fileName:_jsxFileName,lineNumber:241}},_react.default.createElement(_reactNative.Animated.View,{style:this.getPrimaryViewStyle(),__source:{fileName:_jsxFileName,lineNumber:242}}),_react.default.createElement(_reactNative.Animated.View,{style:this.getSecondaryViewStyle(),__source:{fileName:_jsxFileName,lineNumber:243}})),this.renderRatings())):null;}}]);return SwipeRating;}(_react.Component);exports.default=SwipeRating;SwipeRating.defaultProps={type:'star',ratingImage:require('./images/star.png'),ratingColor:'#f1c40f',ratingBackgroundColor:'white',ratingCount:5,imageSize:40,onFinishRating:function onFinishRating(){return console.log('Attach a onFinishRating function here.');},minValue:0};var styles=_reactNative.StyleSheet.create({starsWrapper:{flexDirection:'row',justifyContent:'center',alignItems:'center'},starsInsideWrapper:{position:'absolute',top:0,left:0,right:0,bottom:0,flexDirection:'row',justifyContent:'center',alignItems:'center'},showRatingView:{flexDirection:'column',justifyContent:'center',alignItems:'center',paddingBottom:5},ratingView:{flexDirection:'row',justifyContent:'center',alignItems:'center',paddingBottom:5},ratingText:{fontSize:15,textAlign:'center',fontFamily:_reactNative.Platform.OS==='ios'?'Trebuchet MS':null,color:'#34495e'},readonlyLabel:{justifyContent:'center',alignItems:'center',fontSize:12,textAlign:'center',fontFamily:_reactNative.Platform.OS==='ios'?'Trebuchet MS':null,color:'#34495a'},currentRatingText:{fontSize:30,textAlign:'center',fontFamily:_reactNative.Platform.OS==='ios'?'Trebuchet MS':null},maxRatingText:{fontSize:18,textAlign:'center',fontFamily:_reactNative.Platform.OS==='ios'?'Trebuchet MS':null,color:'#34495e'}});var fractionsType=function fractionsType(props,propName,componentName){if(props[propName]){var value=props[propName];if(typeof value==='number'){return value>=0&&value<=20?null:new Error(\"`\"+propName+\"` in `\"+componentName+\"` must be between 0 and 20\");}return new Error(\"`\"+propName+\"` in `\"+componentName+\"` must be a number\");}};SwipeRating.propTypes={type:_propTypes.default.string,ratingImage:_reactNative.Image.propTypes.source,ratingColor:_propTypes.default.string,ratingBackgroundColor:_propTypes.default.string,ratingCount:_propTypes.default.number,ratingTextColor:_propTypes.default.string,imageSize:_propTypes.default.number,onStartRating:_propTypes.default.func,onFinishRating:_propTypes.default.func,showRating:_propTypes.default.bool,style:_reactNative.ViewPropTypes.style,readonly:_propTypes.default.bool,startingValue:_propTypes.default.number,fractions:fractionsType,minValue:_propTypes.default.number};",{"version":3,"sources":["C:/backup/RNDSDemo/node_modules/react-native-ratings/src/SwipeRating.js"],"names":["STAR_IMAGE","require","HEART_IMAGE","ROCKET_IMAGE","BELL_IMAGE","TYPES","star","source","color","backgroundColor","heart","rocket","bell","SwipeRating","props","onStartRating","onFinishRating","fractions","position","Animated","ValueXY","panResponder","PanResponder","create","onStartShouldSetPanResponder","onPanResponderGrant","onPanResponderMove","event","gesture","newPosition","setValue","x","dx","y","setState","value","onPanResponderRelease","rating","getCurrentRating","state","minValue","setCurrentRating","display","console","log","startingValue","prevProps","imageSize","ratingCount","type","width","interpolate","inputRange","outputRange","extrapolate","useNativeDriver","height","tintColor","index","styles","starContainer","currentRating","Math","ceil","toFixed","initialRating","readonly","ratingTextColor","showRatingView","ratingView","ratingText","currentRatingText","maxRatingText","readonlyLabel","ratingImage","ratingColor","ratingBackgroundColor","style","showRating","custom","displayCurrentRating","starsWrapper","panHandlers","starsInsideWrapper","getPrimaryViewStyle","getSecondaryViewStyle","renderRatings","Component","defaultProps","StyleSheet","flexDirection","justifyContent","alignItems","top","left","right","bottom","paddingBottom","fontSize","textAlign","fontFamily","Platform","OS","fractionsType","propName","componentName","Error","propTypes","PropTypes","string","Image","number","func","bool","ViewPropTypes"],"mappings":"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","sourcesContent":["import times from 'lodash/times';\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { \n  View, Text, Animated, PanResponder, Image, \n  StyleSheet, Platform, ViewPropTypes\n} from 'react-native';\n\n// RATING IMAGES WITH STATIC BACKGROUND COLOR (white)\nconst STAR_IMAGE = require('./images/star.png');\nconst HEART_IMAGE = require('./images/heart.png');\nconst ROCKET_IMAGE = require('./images/rocket.png');\nconst BELL_IMAGE = require('./images/bell.png');\n\nconst TYPES = {\n  star: {\n    source: STAR_IMAGE,\n    color: '#f1c40f',\n    backgroundColor: 'white'\n  },\n  heart: {\n    source: HEART_IMAGE,\n    color: '#e74c3c',\n    backgroundColor: 'white'\n  },\n  rocket: {\n    source: ROCKET_IMAGE,\n    color: '#2ecc71',\n    backgroundColor: 'white'\n  },\n  bell: {\n    source: BELL_IMAGE,\n    color: '#f39c12',\n    backgroundColor: 'white'\n  }\n};\n\nexport default class SwipeRating extends Component {\n  static defaultProps = {\n    type: 'star',\n    ratingImage: require('./images/star.png'),\n    ratingColor: '#f1c40f',\n    ratingBackgroundColor: 'white',\n    ratingCount: 5,\n    imageSize: 40,\n    onFinishRating: () => console.log('Attach a onFinishRating function here.'),\n    minValue: 0\n  };\n\n  constructor(props) {\n    super(props);\n    const { onStartRating, onFinishRating, fractions } = this.props;\n    const position = new Animated.ValueXY();\n\n    const panResponder = PanResponder.create({\n      onStartShouldSetPanResponder: () => true,\n      onPanResponderGrant: () => {\n        if (typeof onStartRating === 'function') {\n          onStartRating();\n        }\n      },\n      onPanResponderMove: (event, gesture) => {\n        const newPosition = new Animated.ValueXY();\n        newPosition.setValue({ x: gesture.dx, y: 0 });\n        this.setState({ position: newPosition, value: gesture.dx });\n      },\n      onPanResponderRelease: event => {\n        const rating = this.getCurrentRating(this.state.value);\n        if (rating >= this.props.minValue) {\n          if (!fractions) {\n            // 'round up' to the nearest rating image\n            this.setCurrentRating(rating);\n          }\n          onFinishRating(rating);\n        }\n      }\n    });\n\n    this.state = { panResponder, position, display: false };\n  }\n\n  async componentDidMount() {\n    try {\n      const STAR_IMAGE = await require('./images/star.png');\n      const HEART_IMAGE = await require('./images/heart.png');\n      const ROCKET_IMAGE = await require('./images/rocket.png');\n      const BELL_IMAGE = await require('./images/bell.png');\n\n      this.setState({ display: true })\n    } catch(err) {\n      console.log(err)\n    }\n\n    this.setCurrentRating(this.props.startingValue);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.startingValue !== prevProps.startingValue) {\n      this.setCurrentRating(this.props.startingValue);\n    }\n  }\n\n  getPrimaryViewStyle() {\n    const { position } = this.state;\n    const { imageSize, ratingCount, type } = this.props;\n\n    const color = TYPES[type].color;\n\n    const width = position.x.interpolate(\n      {\n        inputRange: [-ratingCount * (imageSize / 2), 0, ratingCount * (imageSize / 2)],\n        outputRange: [0, (ratingCount * imageSize) / 2, ratingCount * imageSize],\n        extrapolate: 'clamp'\n      },\n      {\n        useNativeDriver: true\n      }\n    );\n\n    return {\n      backgroundColor: color,\n      width,\n      height: width ? imageSize : 0\n    };\n  }\n\n  getSecondaryViewStyle() {\n    const { position } = this.state;\n    const { imageSize, ratingCount, type } = this.props;\n\n    const backgroundColor = TYPES[type].backgroundColor;\n\n    const width = position.x.interpolate(\n      {\n        inputRange: [-ratingCount * (imageSize / 2), 0, ratingCount * (imageSize / 2)],\n        outputRange: [ratingCount * imageSize, (ratingCount * imageSize) / 2, 0],\n        extrapolate: 'clamp'\n      },\n      {\n        useNativeDriver: true\n      }\n    );\n\n    return {\n      backgroundColor,\n      width,\n      height: width ? imageSize : 0\n    };\n  }\n\n  renderRatings() {\n    const { imageSize, ratingCount, type, tintColor } = this.props;\n    const source = TYPES[type].source;\n\n    return times(ratingCount, index => (\n      <View key={index} style={styles.starContainer}>\n        <Image source={source} style={{ width: imageSize, height: imageSize, tintColor }} />\n      </View>\n    ));\n  }\n\n  getCurrentRating(value) {\n    // const { value } = this.state;\n    const { fractions, imageSize, ratingCount } = this.props;\n\n    const startingValue = ratingCount / 2;\n    let currentRating = (this.props.minValue) ? this.props.minValue : 0;\n\n    if (value > (ratingCount * imageSize) / 2) {\n      currentRating = ratingCount;\n    } else if (value < (-ratingCount * imageSize) / 2) {\n      currentRating = (this.props.minValue) ? this.props.minValue : 0;\n    } else if (value <= imageSize || value > imageSize) {\n      currentRating = startingValue + value / imageSize;\n      currentRating = !fractions ? Math.ceil(currentRating) : +currentRating.toFixed(fractions);\n    } else {\n      currentRating = !fractions ? Math.ceil(startingValue) : +startingValue.toFixed(fractions);\n    }\n\n    return currentRating;\n  }\n\n  setCurrentRating(rating) {\n    const { imageSize, ratingCount } = this.props;\n\n    // `initialRating` corresponds to `startingValue` in the getter. Naming it\n    // differently here avoids confusion with `value` below.\n    const initialRating = ratingCount / 2;\n    let value = null;\n\n    if (rating > ratingCount) {\n      value = (ratingCount * imageSize) / 2;\n    } else if (rating < 0) {\n      value = (-ratingCount * imageSize) / 2;\n    } else if (rating < ratingCount / 2 || rating > ratingCount / 2) {\n      value = (rating - initialRating) * imageSize;\n    } else {\n      value = 0;\n    }\n\n    const newPosition = new Animated.ValueXY();\n    newPosition.setValue({ x: value, y: 0 });\n    this.setState({ position: newPosition, value });\n  }\n\n  displayCurrentRating() {\n    const { ratingCount, type, readonly, ratingTextColor } = this.props;\n    const color = ratingTextColor || TYPES[type].color;\n\n    return (\n      <View style={styles.showRatingView}>\n        <View style={styles.ratingView}>\n          <Text style={[styles.ratingText, { color }]}>Rating:{' '}</Text>\n          <Text style={[styles.currentRatingText, { color }]}>{this.getCurrentRating(this.state.value)}</Text>\n          <Text style={[styles.maxRatingText, { color }]}>/{ratingCount}</Text>\n        </View>\n        <View>{readonly && <Text style={[styles.readonlyLabel, { color }]}>(readonly)</Text>}</View>\n      </View>\n    );\n  }\n\n  render() {\n    const { readonly, type, ratingImage, ratingColor, ratingBackgroundColor, style, showRating } = this.props;\n\n    if (type === 'custom') {\n      let custom = {\n        source: ratingImage,\n        color: ratingColor,\n        backgroundColor: ratingBackgroundColor\n      };\n      TYPES.custom = custom;\n    }\n\n    return (\n      this.state.display ?\n      <View pointerEvents={readonly ? 'none' : 'auto'} style={style}>\n        {showRating && this.displayCurrentRating()}\n        <View style={styles.starsWrapper} {...this.state.panResponder.panHandlers}>\n          <View style={styles.starsInsideWrapper}>\n            <Animated.View style={this.getPrimaryViewStyle()} />\n            <Animated.View style={this.getSecondaryViewStyle()} />\n          </View>\n          {this.renderRatings()}\n        </View>\n      </View> :\n      null\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  starsWrapper: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  starsInsideWrapper: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  showRatingView: {\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingBottom: 5\n  },\n  ratingView: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingBottom: 5\n  },\n  ratingText: {\n    fontSize: 15,\n    textAlign: 'center',\n    fontFamily: Platform.OS === 'ios' ? 'Trebuchet MS' : null,\n    color: '#34495e'\n  },\n  readonlyLabel: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    fontSize: 12,\n    textAlign: 'center',\n    fontFamily: Platform.OS === 'ios' ? 'Trebuchet MS' : null,\n    color: '#34495a'\n  },\n  currentRatingText: {\n    fontSize: 30,\n    textAlign: 'center',\n    fontFamily: Platform.OS === 'ios' ? 'Trebuchet MS' : null\n  },\n  maxRatingText: {\n    fontSize: 18,\n    textAlign: 'center',\n    fontFamily: Platform.OS === 'ios' ? 'Trebuchet MS' : null,\n    color: '#34495e'\n  }\n});\n\nconst fractionsType = (props, propName, componentName) => {\n  if (props[propName]) {\n    const value = props[propName];\n    if (typeof value === 'number') {\n      return value >= 0 && value <= 20\n        ? null\n        : new Error(`\\`${propName}\\` in \\`${componentName}\\` must be between 0 and 20`);\n    }\n\n    return new Error(`\\`${propName}\\` in \\`${componentName}\\` must be a number`);\n  }\n};\n\nSwipeRating.propTypes = {\n  type: PropTypes.string,\n  ratingImage: Image.propTypes.source,\n  ratingColor: PropTypes.string,\n  ratingBackgroundColor: PropTypes.string,\n  ratingCount: PropTypes.number,\n  ratingTextColor: PropTypes.string,\n  imageSize: PropTypes.number,\n  onStartRating: PropTypes.func,\n  onFinishRating: PropTypes.func,\n  showRating: PropTypes.bool,\n  style: ViewPropTypes.style,\n  readonly: PropTypes.bool,\n  startingValue: PropTypes.number,\n  fractions: fractionsType,\n  minValue: PropTypes.number\n};\n"]}]}